{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://raise.local/schemas/v1/actors/actor.schema.json",
  "title": "Actor",
  "description": "Repr√©sente un acteur (personne, service, organisation, bot, appareil) dans RAISE.",
  "x_schemaVersion": "1.0.0",
  "x_label": {
    "fr": "Acteur",
    "en": "Actor"
  },
  "x_description": {
    "fr": "Entit√© logique susceptible d'√©mettre/recevoir des √©v√©nements et de d√©tenir des r√¥les.",
    "en": "Logical entity that can emit/receive events and hold roles."
  },

  "type": "object",
  "additionalProperties": false,
  "unevaluatedProperties": false,

  "properties": {
    "$schema": {
      "$ref": "../common/types/primitive-types.schema.json#/$defs/instanceSchemaUri"
    },
    "id": {
      "$ref": "../common/types/primitive-types.schema.json#/$defs/_id"
    },
    "createdAt": {
      "$ref": "../common/types/primitive-types.schema.json#/$defs/createdAt"
    },
    "updatedAt": {
      "$ref": "../common/types/primitive-types.schema.json#/$defs/updatedAt"
    },

    "handle": {
      "$ref": "../common/types/primitive-types.schema.json#/$defs/slug",
      "description": "Identifiant lisible (kebab-case) unique dans l'espace."
    },

    "displayName": {
      "$ref": "../common/types/primitive-types.schema.json#/$defs/nonEmptyString",
      "description": "Nom d‚Äôaffichage principal."
    },

    "label": {
      "$ref": "../common/types/primitive-types.schema.json#/$defs/i18nNonEmptyString",
      "description": "Libell√© localis√© (FR/EN)."
    },

    "emoji": {
      "$ref": "../common/types/primitive-types.schema.json#/$defs/x_emoji",
      "description": "Emoji associ√© √† l‚Äôacteur."
    },

    "kind": {
      "title": "Type d'acteur",
      "type": "string",
      "enum": ["human", "service", "organization", "device", "bot"],
      "default": "human"
    },

    "email": {
      "$ref": "../common/types/primitive-types.schema.json#/$defs/email"
    },

    "phone": {
      "$ref": "../common/types/primitive-types.schema.json#/$defs/phoneE164"
    },

    "language": {
      "$ref": "../common/types/primitive-types.schema.json#/$defs/languageTag"
    },

    "locale": {
      "$ref": "../common/types/primitive-types.schema.json#/$defs/locale"
    },

    "roles": {
      "type": "array",
      "description": "R√¥les associ√©s (r√©f√©rences symboliques).",
      "items": { "$ref": "../common/types/primitive-types.schema.json#/$defs/nonEmptyString" },
      "uniqueItems": true,
      "default": []
    },

    "tags": {
      "type": "array",
      "description": "Tags libres de classification.",
      "items": { "$ref": "../common/types/primitive-types.schema.json#/$defs/nonEmptyString" },
      "uniqueItems": true,
      "default": []
    },

    "urls": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "website": { "$ref": "../common/types/primitive-types.schema.json#/$defs/url" },
        "avatar": { "$ref": "../common/types/primitive-types.schema.json#/$defs/url" },
        "profile": { "$ref": "../common/types/primitive-types.schema.json#/$defs/url" }
      }
    }
  },

  "required": ["$schema", "id", "createdAt", "handle", "displayName"],

  "patternProperties": {
    "^x_": {}
  },

  "examples": [
    {
      "handle": "alice-smith",
      "displayName": "Alice Smith",
      "label": { "fr": "Alice Smith", "en": "Alice Smith" },
      "emoji": "üë§",
      "kind": "person",
      "email": "alice@example.org",
      "language": "en-GB",
      "locale": "en_GB",
      "roles": ["admin", "editor"],
      "tags": ["engineering", "platform"],
      "urls": { "website": "https://example.org/~alice" }
    }
  ]
}
